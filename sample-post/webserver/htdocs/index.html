<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="utf-8"/>

    <script src="/lib/jquery-1.7.2.min.js" ></script>
    <script src="/lib/json2.js" ></script>
    <script src="/lib/jquery.form.js" type="text/javascript"></script>
 
    <script  type="text/javascript" >
        alert(1);
        function doUpload() {
            var name = $('#pop_filename').val() === "" ? $('form[name=fileForm] input[name=fileName]')[0].files[0].name : $('#pop_filename').val();

            var options  = {
                url:"/cgi-bin/fileupload.js?action=uploadFile&name=" + name,
                type:'post',
                dataType : "json",
                success:function(data)
                {
                    console.log(data);
                },
                error : function (data, status, e) {
                    console.log(data, status, e);
                }
            };
            $('form[name=fileForm]').ajaxSubmit(options);
        }

    </script>
    
</head>

<body>
<h1>nodejs-post-file示例</h1>
<h2>更多用法请关注：<a href="http://www.cnblogs.com/motadou/p/4319494.html">nodejs模拟http-post文件的方法示例</a></h2>


<iframe id="postFormFrame" name="postFormFrame" style= "display:none;"> </iframe>
<form action="" method="post" enctype="multipart/form-data" name="fileForm" target="postFormFrame" >
    <div class="line">
        <span>文件：</span>
        <input type="file" id="fileName" name="fileName" />
    </div>
    
    <div class="line">
            <span>文件名：</span>
            <input type="text" id="pop_filename"/>
        </div>
        <div>
            <button onclick="doUpload()">上传</button>
        </div>
	</form>

	<form id="showRecordForm" class="editForm xl" style="display:none;width:800px; height:200px">
		<label><span>文件名:		</span><input class="text" id="_filename" readonly disabled="disabled" /></label>
		<label><span>上传者:		</span><input class="text" id="_uploader" readonly disabled="disabled" /></label>
		<label><span>文件大小(K):</span><input class="text" id="_filesize" readonly disabled="disabled" /></label>
		<label><span>上传时间:	</span><input class="text" id="_up_time"  readonly="readonly" disabled="disabled" /></label>
		<label class="engross"><span>URL地址:</span><input class="text" id="_url" readonly disabled="disabled" /></label>
	</form>
</body>
</html>